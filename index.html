<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>ç†è²¡å¤§æ»¿è²«</title>

<!-- æ¡Œé¢/æ‰‹æ©Ÿå¿«æ·æ–¹å¼ icon -->
<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" type="image/png" href="icon.png">

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
/* SVT ä¸»é¡Œ â€” æ·¡æ·¡çš„ */
:root {
  --rose:#FFD6E8;
  --serenity:#DAE8FF;
  --bg:#FBFCFF;
  --text:#374151;
  --card:#FFFFFF;
  --border:#F2F2F7;
  --warm:rgba(255,187,130,.16);
}

<title>ç†è²¡å¤§æ»¿è²«</title>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
/* SVT ä¸»é¡Œ â€” æ·¡æ·¡çš„ */
:root {
  --rose:#FFD6E8;
  --serenity:#DAE8FF;
  --bg:#FBFCFF;
  --text:#374151;
  --card:#FFFFFF;
  --border:#F2F2F7;
  --warm:rgba(255,187,130,.16);
}

body{
  margin:0;
  font-family:"Noto Sans","Segoe UI",system-ui;
  background:var(--bg);
  color:var(--text);
}

.app{
  padding-bottom:70px;
}

/* æ¨™é¡Œ */
h2{
  margin:5px 0 10px;
  font-size:18px;
  font-weight:900;
  color:#7a6c8e;
}

/* å¡ç‰‡ */
.page{
  background:var(--card);
  margin:12px;
  padding:16px;
  border-radius:22px;
  border:1px solid var(--border);
  box-shadow:0 14px 26px var(--warm);
}

button{
  border:none;
  padding:9px 14px;
  border-radius:14px;
  background:linear-gradient(135deg,var(--rose),var(--serenity));
  color:#4a3a52;
  font-weight:700;
}

input,select{
  width:100%;
  padding:8px;
  border-radius:10px;
  border:1px solid #e6eaf3;
  background:#f7f9ff;
  margin-top:5px;
}

/* åˆ†é éš±è— */
.page{display:none;}
.page.active{display:block;}

/* app åº•éƒ¨å°èˆª */
.bottom-nav{
  position:fixed;
  bottom:0;left:0;right:0;
  display:flex;
  gap:8px;
  padding:10px;
  background:#fff;
  border-top:2px solid var(--serenity);
}

.bottom-nav button{
  flex:1;
}

/* item å¡ç‰‡ */
.item{
  background:#fff;
  padding:10px;
  border-radius:18px;
  margin-bottom:12px;
  box-shadow:0 10px 25px rgba(175,201,255,.25);
}

/* å¤œé–“ */
body.dark{
  --bg:#0f172a;
  --text:#E5E7EB;
  --card:#1E293B;
  --border:#374151;
}

body.dark .bottom-nav{
  background:#111827;
  border-color:#374151;
}
</style>
</head>

<body>

<div class="app">

<!-- 1 æŒ‘æˆ° -->
<div id="page-challenge" class="page active">
  <h2>ğŸ¯ æŒ‘æˆ°</h2>

  <label>æŒ‘æˆ°ç›®æ¨™</label>
  <input id="goal" placeholder="è¼¸å…¥ä½ çš„æŒ‘æˆ°é‡‘é¡">

  <label>å‚™è¨»</label>
  <input id="note">

  <button onclick="saveChallenge()">å„²å­˜æŒ‘æˆ°</button>

  <div id="challengeView" style="margin-top:15px"></div>
</div>

<!-- 2 æ­·å²ï¼‹åœ“é¤… -->
<div id="page-history" class="page">
  <h2>ğŸ“Š æ­·å²ç´€éŒ„ & åœ“é¤…åœ–</h2>

  <div id="historyList"></div>

  <canvas id="pieChart" style="margin-top:10px"></canvas>
</div>

<!-- 3 å°å‡º -->
<div id="page-export" class="page">
  <h2>ğŸ“¤ å°å‡ºæ•¸æ“š</h2>

  <button onclick="toggleDark()">ğŸŒ™ åˆ‡æ›å¤œé–“æ¨¡å¼</button>
  <br><br>
  <button onclick="alert('é€™è£¡ä¹‹å¾Œå¹«ä½ åš Excel + çµ±è¨ˆé ')">
    ç”Ÿæˆ Excelï¼ˆä¹‹å¾Œåš ğŸ‘ï¼‰
  </button>
</div>

</div>

<!-- åº•éƒ¨å°èˆª -->
<nav class="bottom-nav">
  <button onclick="showPage('page-challenge')">æŒ‘æˆ°</button>
  <button onclick="showPage('page-history')">æ­·å²</button>
  <button onclick="showPage('page-export')">å°å‡º</button>
</nav>

<script>
/* åˆ†é  */
function showPage(id){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* å¤œé–“æ¨¡å¼ */
function toggleDark(){
  document.body.classList.toggle("dark");
}

/* æ¨¡æ“¬è³‡æ–™ï¼ˆå…ˆåš UIï¼‰ */
let history = [
  {type:"æ”¯å‡º", amount:50},
  {type:"æ”¯å‡º", amount:30},
  {type:"æ”¶å…¥", amount:100}
];

/* æŒ‘æˆ°å„²å­˜ */
function saveChallenge(){
  const goal = document.getElementById("goal").value;
  const note = document.getElementById("note").value;

  document.getElementById("challengeView").innerHTML =
    `<div class='item'>ğŸ¯ ç›®æ¨™ï¼š${goal}<br>ğŸ“Œ å‚™è¨»ï¼š${note}</div>`;
}

/* æ­·å² & åœ“é¤… */
function renderHistory(){
  const box = document.getElementById("historyList");
  box.innerHTML = "";

  let income=0, expense=0;

  history.forEach(h=>{
    box.innerHTML += `<div class='item'>${h.type} â€” ${h.amount}</div>`;
    if(h.type==="æ”¶å…¥") income+=h.amount;
    else expense+=h.amount;
  });

  renderPie([income,expense]);
}

let pie;
function renderPie(data){
  const ctx = document.getElementById("pieChart");
  if(pie) pie.destroy();
  pie = new Chart(ctx,{
    type:"pie",
    data:{
      labels:["æ”¶å…¥","æ”¯å‡º"],
      datasets:[{
        data:data,
        backgroundColor:["#FFD6E8","#DAE8FF"]
      }]
    }
  });
}

renderHistory();
</script>

</body>
</html>
